{% extends 'champsquarebackend/dashboard/quiz/step_form.html' %}


{% load i18n %}

{% block progress %}
    {% include 'champsquarebackend/dashboard/quiz/progress.html' with step=2 %}
{% endblock %}

{% block form_fields %}
    <span class="error-block">{{ form.non_field_errors }}</span>

    <!-- {% for field in form  %}
        {% include 'champsquarebackend/dashboard/partials/form_field.html' with field=field %}      
    {% endfor %} -->


   
    
    <form action="" method="POST" id="design_q">
    <input class ="btn primary small" type="submit" name="back" id="back" value="Cancel">
        {% csrf_token %}
        <input type=hidden name="is_active" id="is_active" value="{{ state }}">
        <center><b>Manual mode to design the {{lang}}  Question Paper</b></center><br>
        <ul class="nav nav-tabs tabs" data-tabs="tabs">
        <li class="active" id="fixed-tab">
            <a href="#fixed-questions" id="fixed">
                STEP 1<br>
                Add Fixed Questions
            </a>
        </li>
        <li id="finish-tab">
        <a href="#finish" id="finished">
            STEP 3<br>
            Finish
        </a></li>
    </ul>
    
        <div>
            <h3>Total Questions:  <span id="total_marks" class="well"> {{ questionpaper.total_questions }} </span>
                <span class="pull-right">Total Marks:  <span id="total_marks" class="well"> {{ questionpaper.quiz.total_marks }} </span></span></h3>
    
        </div>
    <div class="tab-content">
        <!-- common to fixed and random questions -->
        
    
        <div class="tab-pane active" id="fixed-questions">
            <div class="row">
                <div class="col-md-6">
                    <div id="fixed-available-wrapper">
                        <p><u>Select questions to add:</u></p>
                        <div id="fixed-available">
                            {% if state == "fixed"  or state == "None" %}
                                <ul class="inputs-list">
                                   {% for question in questions %}
                                        <li>
                                            <label>
                                                <input type="checkbox" name="questions" data-qid="{{question.id}}" value={{question.id}}>
                                                <span> {{ question.summary }} </span> <span> {{ question.points }} </span>
                                            </label>
                                         </li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        <br /><br />
                        <button id="add-fixed" name="add-fixed" class="btn small primary pull-right" type="submit">Add to paper</button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div id="fixed-added-wrapper">
                        <p><u>Fixed questions currently in paper:</u></p>
                        <div id="fixed-added">
                                <ul class="inputs-list">
                                   {% for question in fixed_questions %}
                                        <li>
                                            <label>
                                                <input type="checkbox" name="added-questions"
                                                data-qid="{{question.id}}" value={{question.id}}>
                                                <span> {{ question.summary }} </span>
                                                <span> {{ question.points }} </span>
                                            </label>
                                         </li>
                                    {% endfor %}
                                </ul>
                        </div>
                         <br />
                        <button id="remove-fixed" name="remove-fixed" class="btn small primary pull-right" type="submit"> Remove from paper</button>
                    </div>
                </div>
            </div> <!-- /.row -->
            <br>
            <div class="pull-right">
                <a class="btn" id="fixed-next">Next &gt;</a>
            </div>
        </div> <!-- /#fixed-questions -->
    
        <div class="tab-pane" id="finish">
            <center>
                <h5>Almost finished creating your question paper</h5>
                <label style="float: none;">
                    {{ qpaper_form.shuffle_questions }}
                    <span>Auto shuffle.</span>
                </label> <br><br>
                {{ qpaper_form.question_per_subject }}
                <input class ="btn primary large" type="submit" name="save" id="save" value="Save question paper">
                <br>
                <div class="pull-left">
                    <a class="btn" id="finish-prev">&lt; Previous</a>
                </div>
           </center>
        </div> <!-- /#finish -->
    </div>
    <!-- /.tab-content -->
    </form>
    <br>
    <script>
        $(function () {
            $('.tabs').tabs()
            {% if state == "fixed" %}
                $('#fixed').tab('show');
            {% elif state == "finish" %}
                $('#finished').tab('show');
            {% endif %}
        })
    </script>
    {% endblock %}
    {% block manage %}
    {% endblock %}
    




{% endblock %}

{% block submittext %}{% trans "Continue to step 3" %}{% endblock %}

{% block onbodyload %}
    {{ block.super }}
    champsquarebackend.dashboard.quiz.init();
{% endblock %}
